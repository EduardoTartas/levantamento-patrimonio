# Plano de Teste para Model (Milestone 3 - Sprint 7)

| Funcionalidade | Comportamento Esperado | Verificações | Critérios de Aceite |
| :--- | :--- | :--- | :--- |
| Validação de Campos Obrigatórios (Criação) | Um levantamento só pode ser cadastrado se possuir `inventario`, `bemId` e `estado` preenchidos. | Tentar salvar levantamento sem `inventario`, `bemId` ou `estado`. | A operação deve falhar com erro de validação (`Path \`...\` is required`). |
| Cadastro Válido de Levantamento | Um levantamento com `inventario`, `bemId` e `estado` válidos deve ser salvo com sucesso, com `ocioso` padrão `false` e timestamps. | Inserir um levantamento com todos os campos obrigatórios válidos, sem fornecer `ocioso`. | O levantamento é salvo, retornado com `_id`, `createdAt`, `updatedAt`, e o campo `ocioso` é `false`. O campo `__v` não deve estar presente. |
| Validação de Formato de Campos (Criação) | Os campos `inventario`, `bemId` e `salaNova` devem ser ObjectIds válidos, `estado` deve ser enum válido e `imagens` array de strings. | Tentar salvar levantamento com ObjectIds inválidos, estado fora do enum ou imagens com tipo incorreto. | A operação deve falhar com erro de cast (`Cast to ObjectId failed...`) ou validação de enum/tipo. |
| Validação de Enum Estado | O campo `estado` deve aceitar apenas valores: "Em condições de uso", "Inservível", "Danificado". | Tentar salvar levantamento com estado inválido como "Novo" ou "Usado". | A operação deve falhar com erro de validação de enum. |
| Leitura de Levantamentos | O sistema deve retornar todos os levantamentos cadastrados ou uma lista paginada conforme solicitado. | Fazer `find()` para todos e `paginate()` com opções de página/limite. | A resposta contém um array com os levantamentos ou um objeto de paginação (`docs`, `totalDocs`, etc.) com os dados corretos. |
| Atualização de Levantamento | Deve ser possível atualizar campos como `estado`, `observacao`, `salaNova`, `ocioso` de um levantamento existente. | Alterar e salvar campos de um levantamento existente. | O levantamento reflete as alterações e o campo `updatedAt` é atualizado. |
| Validação em Atualização | Campos obrigatórios (`inventario`, `bemId`, `estado`) não podem ser atualizados para valores nulos ou inválidos. | Tentar atualizar campos obrigatórios para `null` ou string vazia/formato inválido. | A operação deve falhar com erro de validação (`Path \`...\` is required` ou erro de cast). |
| Remoção de Levantamento | Um levantamento existente pode ser removido do sistema junto com suas imagens. | Usar `deleteOne()` ou `findByIdAndDelete()` em um levantamento existente. | A remoção é bem-sucedida (`deletedCount` é 1) e o levantamento não é mais encontrado. |
| Plugin de Paginação | O sistema deve suportar paginação através do plugin mongoosePaginate. | Testar `paginate()` com diferentes opções de página, limite e ordenação. | A paginação funciona corretamente retornando metadados como `totalDocs`, `totalPages`, `hasNextPage`, etc. |
| Timestamps Automáticos | O sistema deve registrar automaticamente `createdAt` e `updatedAt` em operações de criação e atualização. | Cadastrar e atualizar levantamento verificando os timestamps. | Ambos os campos existem, são instâncias de `Date` e são atualizados corretamente. |

# Plano de Teste Controller (Milestone 3 - Sprint 7)

| Funcionalidade | Comportamento Esperado | Verificações | Critérios de Aceite |
| :--- | :--- | :--- | :--- |
| Listagem de Levantamentos (Geral) | Deve listar todos os levantamentos se nenhum ID for fornecido, ou buscar por ID específico. | Chamar `listar()` sem parâmetros e com ID válido. | O serviço é chamado corretamente; `CommonResponse.success` é retornado com os dados apropriados (lista ou individual). |
| Validação de Entrada (Listagem) | Deve propagar erro se a validação de ID (Zod) falhar ao listar por ID. | Chamar `listar()` com ID inválido. | O método `listar` do controller lança o erro de validação do Zod; o serviço não é chamado. |
| Criação de Levantamento | Deve validar os dados do corpo, chamar o serviço para criar, e retornar sucesso com os dados do levantamento. | Chamar `criar()` com dados válidos no corpo. | `LevantamentoSchema.parse` é chamado; `LevantamentoService.criar` é chamado; `CommonResponse.created` é retornado com os dados do levantamento. |
| Validação de Entrada (Criação) | Deve propagar erro se a validação dos dados do corpo (Zod) falhar ao criar. | Chamar `criar()` com dados inválidos no corpo. | O método `criar` do controller lança o erro de validação do Zod; o serviço não é chamado. |
| Atualização de Levantamento | Deve validar ID e dados do corpo, chamar o serviço para atualizar, e retornar sucesso com mensagem e dados atualizados. | Chamar `atualizar()` com ID e corpo válidos. | Schemas de ID e Update são validados; `LevantamentoService.atualizar` é chamado; `CommonResponse.success` com levantamento atualizado e mensagem. |
| Validação de Entrada (Atualização) | Deve propagar erro se a validação do ID (Zod) ou dos dados do corpo (Zod) falhar ao atualizar. | Chamar `atualizar()` com ID inválido ou corpo inválido. | O método `atualizar` do controller lança o erro de validação do Zod; o serviço não é chamado. |
| Deleção de Levantamento | Deve validar o ID, chamar o serviço para deletar, e retornar sucesso com mensagem e dados da deleção. | Chamar `deletar()` com ID válido. | `LevantamentoIdSchema.parse` é chamado; `LevantamentoService.deletar` é chamado; `CommonResponse.success` com resposta do serviço e mensagem. |
| Validação de Entrada (Deleção) | Deve propagar erro se a validação do ID (Zod) falhar ao deletar. | Chamar `deletar()` com ID inválido. | O método `deletar` do controller lança o erro de validação do Zod; o serviço não é chamado. |
| Adição de Foto | Deve validar ID e arquivo, chamar o serviço para adicionar foto, e retornar sucesso com URL da foto. | Chamar `adicionarFoto()` com ID válido e arquivo. | `LevantamentoIdSchema.parse` e validação de upload são feitas; `LevantamentoService.adicionarFoto` é chamado; `CommonResponse.success` com URL da foto. |
| Validação de Upload de Foto | Deve propagar erro se a validação do arquivo de upload falhar. | Chamar `adicionarFoto()` com arquivo inválido ou ausente. | O método `adicionarFoto` do controller lança o erro de validação; o serviço não é chamado. |
| Deleção de Fotos | Deve validar o ID, chamar o serviço para deletar fotos, e retornar sucesso com confirmação. | Chamar `deletarFoto()` com ID válido. | `LevantamentoIdSchema.parse` é chamado; `LevantamentoService.deletarFoto` é chamado; `CommonResponse.success` com confirmação da deleção. |
| Propagação de Erro do Serviço | Deve propagar erros originados no `LevantamentoService` para qualquer operação (listar, criar, atualizar, deletar, fotos). | Mockar o método do serviço correspondente para lançar um erro. | O método do controller correspondente lança o mesmo erro vindo do serviço. |

# Plano de Teste Service (Milestone 3 - Sprint 7)

| Funcionalidade | Comportamento Esperado | Verificações | Critérios de Aceite |
| :--- | :--- | :--- | :--- |
| Listar Levantamentos (Serviço) | Deve chamar `repository.listar` com os parâmetros da requisição e retornar os dados. | Chamar `service.listar(mockReq)`. | `repository.listar` é chamado com `mockReq`; o resultado do repositório é retornado. |
| Criar Levantamento (Serviço) | Deve verificar existência do inventário e bem, verificar duplicação, copiar dados do bem e chamar `repository.criar`. | Chamar `service.criar(mockParsedData)`. Mockar validações para sucesso. | Validações são chamadas; dados do bem são copiados; `repository.criar` é chamado; o levantamento criado é retornado. |
| Falha ao Criar (Inventário Inexistente) | Deve lançar erro se o inventário referenciado não existir. | Chamar `service.criar(mockParsedData)`. Mockar `inventarioService.ensureInvExists` para falhar. | `inventarioService.ensureInvExists` é chamado; o erro de inventário inexistente é lançado; `repository.criar` não é chamado. |
| Falha ao Criar (Bem Inexistente) | Deve lançar erro se o bem referenciado não existir. | Chamar `service.criar(mockParsedData)`. Mockar `bemService.ensureBemExists` para falhar. | `bemService.ensureBemExists` é chamado; o erro de bem inexistente é lançado; `repository.criar` não é chamado. |
| Falha ao Criar (Levantamento Duplicado) | Deve lançar erro se já existir levantamento para o bem no inventário. | Chamar `service.criar(mockParsedData)`. Mockar `repository.buscarPorInventarioEBem` para retornar levantamento existente. | Validação de duplicação detecta conflito; `CustomError` é lançado; `repository.criar` não é chamado. |
| Falha ao Criar (Sala Inexistente) | Deve lançar erro se nova sala referenciada não existir. | Chamar `service.criar(mockParsedData)` com `salaNova`. Mockar `salaService.ensureSalaExists` para falhar. | `salaService.ensureSalaExists` é chamado e lança erro; `repository.criar` não é chamado. |
| Atualizar Levantamento (Serviço) | Deve garantir que o levantamento exista, validar nova sala se fornecida e chamar `repository.atualizar`. | Chamar `service.atualizar(mockId, mockUpdateData)` com e sem sala nova. Mockar validações para sucesso. | `repository.buscarPorId` é chamado. Se sala nos dados, `salaService.ensureSalaExists` é chamado. `repository.atualizar` é chamado; o levantamento atualizado é retornado. |
| Falha ao Atualizar (Levantamento Inexistente) | Deve lançar erro se o levantamento a ser atualizado não existir. | Chamar `service.atualizar()` para ID inexistente. | `repository.buscarPorId` é chamado e lança `CustomError` (NOT_FOUND); `repository.atualizar` não é chamado. |
| Falha ao Atualizar (Nova Sala Inexistente) | Deve lançar erro se uma nova sala for fornecida na atualização e não existir. | Chamar `service.atualizar()` com dados contendo sala inexistente. Mockar validações apropriadas. | `salaService.ensureSalaExists` é chamado e lança erro; `repository.atualizar` não é chamado. |
| Deletar Levantamento (Serviço) | Deve garantir que o levantamento exista, deletar fotos do MinIO e chamar `repository.deletar`. | Chamar `service.deletar(mockId)`. Mockar validações para sucesso. | `repository.buscarPorId` é chamado; fotos são deletadas do MinIO; `repository.deletar` é chamado; a resposta da deleção é retornada. |
| Falha ao Deletar (Levantamento Inexistente) | Deve lançar erro se o levantamento a ser deletado não existir. | Chamar `service.deletar()` para ID inexistente. | `repository.buscarPorId` é chamado e lança `CustomError` (NOT_FOUND); `repository.deletar` não é chamado. |
| Adicionar Foto (Serviço) | Deve validar levantamento, fazer upload para MinIO, atualizar levantamento e retornar URL. | Chamar `service.adicionarFoto(mockId, mockFile)`. Mockar upload para sucesso. | `repository.buscarPorId` é chamado; upload é feito; `repository.atualizar` é chamado; URL da foto é retornada. |
| Falha Adicionar Foto (Upload) | Deve lançar erro se upload para MinIO falhar. | Chamar `service.adicionarFoto()`. Mockar upload para falhar. | Upload falha; `CustomError` é lançado; `repository.atualizar` não é chamado. |
| Deletar Fotos (Serviço) | Deve validar levantamento, deletar fotos do MinIO e atualizar levantamento. | Chamar `service.deletarFoto(mockId)`. Mockar operações para sucesso. | `repository.buscarPorId` é chamado; fotos são deletadas do MinIO; `repository.atualizar` é chamado; confirmação é retornada. |
| Falha Deletar Fotos (Sem Fotos) | Deve lançar erro se não houver fotos para deletar. | Chamar `service.deletarFoto()` em levantamento sem fotos. | Validação detecta ausência de fotos; `CustomError` é lançado. |
| Propagação de Erro do Repositório (Serviço) | Deve propagar erros originados no `repository` ou serviços auxiliares. | Mockar método relevante para lançar um erro. | A chamada ao método do serviço correspondente rejeita com o mesmo erro lançado. |

# Plano de Teste Repository (Milestone 3 - Sprint 7)

| Funcionalidade | Comportamento Esperado | Verificações | Critérios de Aceite |
| :--- | :--- | :--- | :--- |
| Inicialização do Repositório | Deve instanciar corretamente e falhar se o modelo injetado não possuir o método `paginate`. | Instanciar `LevantamentoRepository` com mock de modelo válido e inválido (sem `paginate`). | Instanciação bem-sucedida com modelo válido. Erro lançado se `paginate` não existir no modelo, com mensagem específica. |
| Buscar Levantamento por ID (Método `buscarPorId`) | Deve buscar um levantamento pelo ID com populate de relacionamentos. Se não encontrado, deve lançar `CustomError` (NOT_FOUND). | Chamar `repository.buscarPorId()` com ID existente e inexistente. | `this.model.findById` é chamado com populate. Retorna dados do levantamento se encontrado. Lança `CustomError` (404, "resourceNotFound", "Levantamento") se não encontrado. |
| Buscar por Inventário e Bem (Método `buscarPorInventarioEBem`) | Deve buscar levantamento específico pela combinação de inventário e bem. | Chamar `repository.buscarPorInventarioEBem()` com IDs válidos. | `this.model.findOne` é chamado com filtro correto. Retorna levantamento se encontrado ou `null` se não encontrado. |
| Listar Levantamentos (Método `listar`) | Se ID fornecido, busca por ID com `populate` e `lean`. Se não, usa `LevantamentoFilterBuilder` e `paginate` com opções, `populate`, `sort` e `lean`. | Chamar `repository.listar()` com ID (`req.params.id`), e com várias queries (`req.query`) para testar filtros, paginação padrão/customizada e limite máximo (100). | Para ID: `findById().populate().lean()` é chamado. Para query: `FilterBuilder` é usado; `model.paginate()` é chamado com filtros e opções corretas incluindo ordenação por `createdAt` descendente. |
| Falha Interna no `listar` (FilterBuilder) | Deve lançar `CustomError` (500) se `filterBuilder.build` não for uma função (guarda interna). | Chamar `repository.listar()` mockando `LevantamentoFilterBuilder` para ter `build` inválido. | `CustomError` (500, "internalServerError", "Levantamento") é lançado. |
| Criar Levantamento (Repositório) | Deve instanciar o modelo com os dados fornecidos e chamar `save()`. | Chamar `repository.criar(novoLevantamentoData)`. | `this.model` é instanciado com os dados; `save()` é chamado; o levantamento salvo é retornado. |
| Atualizar Levantamento (Repositório) | Deve atualizar usando `findByIdAndUpdate` com `new: true`, `populate`, `lean`. Lança `CustomError` (NOT_FOUND) se não encontrado. | Chamar `repository.atualizar()` com ID existente e inexistente, e dados de atualização. | `findByIdAndUpdate()` é chamado com ID, dados e opções. Retorna dados atualizados com populate. Lança `CustomError` (404, "resourceNotFound", "Levantamento") se retorna `null`. |
| Deletar Levantamento (Repositório) | Deve deletar usando `findByIdAndDelete`. Retorna o documento deletado ou `null` se não encontrado (não lança erro aqui). | Chamar `repository.deletar()` com ID existente e inexistente. | `findByIdAndDelete()` é chamado com ID. Retorna o documento deletado ou `null` se não foi encontrado. |
| Aplicação de Filtros | Deve usar `LevantamentoFilterBuilder` para construir filtros complexos baseados na query. | Chamar `repository.listar()` com diferentes parâmetros de filtro. | `FilterBuilder` é instanciado e métodos de filtro são chamados conforme parâmetros da query. |

# Plano de Teste Endpoints (Milestone 3 - Sprint 7)

| Funcionalidade | Comportamento Esperado | Verificações | Critérios de Aceite |
| :--- | :--- | :--- | :--- |
| Listar levantamentos | Deve retornar todos os levantamentos via `GET /levantamentos`. | Fazer requisição `GET /levantamentos`. | A resposta contém um array com os levantamentos cadastrados e status 200 com metadados de paginação. |
| Buscar por ID | Deve retornar o levantamento correto via `GET /levantamentos/:id`. | Fazer requisição `GET /levantamentos/:id` com ID válido e inválido. | Retorna o levantamento correto com dados populados (inventário, usuário, sala) ou erro 404 se não encontrado. |
| Filtros de busca | Deve aplicar filtros via query params em `GET /levantamentos`. | Fazer `GET /levantamentos?inventario=507f1f77bcf86cd799439011&estado=Em condições de uso&page=1&limite=5`. | Retorna apenas os levantamentos que atendem aos filtros aplicados com paginação. |
| Paginação | Deve retornar dados paginados com metadados via `GET /levantamentos`. | Fazer `GET /levantamentos?page=2&limite=5` com múltiplos levantamentos cadastrados. | Resposta contém `docs`, `totalDocs`, `page`, `totalPages`, `hasNextPage`, `hasPrevPage`. |
| Filtro por inventário | Deve buscar levantamentos por ID do inventário via query param. | Fazer `GET /levantamentos?inventario=507f1f77bcf86cd799439011` com ObjectId válido. | Retorna levantamentos do inventário especificado com dados do inventário populados. |
| Filtro por estado | Deve buscar levantamentos por estado via query param. | Fazer `GET /levantamentos?estado=Em condições de uso` e outros estados válidos. | Retorna apenas levantamentos com estado correspondente ao filtro. |
| Filtro por usuário | Deve buscar levantamentos por ID do usuário via query param. | Fazer `GET /levantamentos?usuario=507f1f77bcf86cd799439011` com ObjectId válido. | Retorna levantamentos do usuário especificado com dados do usuário populados. |
| Filtro por tombo | Deve buscar levantamentos por tombo (regex case-insensitive) via query param. | Fazer `GET /levantamentos?tombo=TOM123` para levantamentos com tombo contendo "TOM123". | Retorna levantamentos que contenham o tombo especificado, independente de case. |
| Filtro por nome do bem | Deve buscar levantamentos por nome do bem (regex case-insensitive) via query param. | Fazer `GET /levantamentos?nomeBem=mesa` (minúsculo) para bem com nome "Mesa de Escritório". | Retorna levantamentos que contenham o nome do bem especificado, independente de case. |
| Filtro por ocioso | Deve buscar levantamentos por status ocioso via query param. | Fazer `GET /levantamentos?ocioso=true` e `GET /levantamentos?ocioso=false`. | Retorna apenas levantamentos com status ocioso correspondente ao filtro. |
| Criar levantamento | Deve criar novo levantamento via `POST /levantamentos`. | Fazer `POST /levantamentos` com dados válidos no body (`inventario`, `bemId`, `estado`). | Levantamento criado com sucesso, retorna status 201 e dados do levantamento com `_id` e usuário logado associado. |
| Validação na criação | Deve retornar erro 400 para dados inválidos na criação. | Fazer `POST /levantamentos` sem campos obrigatórios ou com tipos/enums inválidos. | Retorna erro 400 com mensagem específica para cada tipo de validação. |
| Duplicação na criação | Deve retornar erro 409 para levantamento duplicado (mesmo bem/inventário). | Fazer `POST /levantamentos` para bem já levantado no mesmo inventário. | Retorna erro 409 com mensagem indicando levantamento duplicado. |
| Atualizar levantamento | Deve atualizar levantamento existente via `PATCH /levantamentos/:id`. | Fazer `PATCH /levantamentos/:id` com dados válidos no body. | Levantamento atualizado com sucesso, retorna status 200 e dados atualizados. |
| Validação na atualização | Deve retornar erro 400 para ID ou dados inválidos na atualização. | Fazer `PATCH /levantamentos/invalid-id` ou com dados inválidos no body. | Retorna erro 400 com mensagem específica para cada tipo de validação. |
| Restrição na atualização | Deve retornar erro 400 ao tentar atualizar campos protegidos (inventario, bemId). | Fazer `PATCH /levantamentos/:id` tentando alterar `inventario` ou `bemId`. | Retorna erro 400 indicando que estes campos não podem ser alterados. |
| Deletar levantamento | Deve deletar levantamento existente via `DELETE /levantamentos/:id`. | Fazer `DELETE /levantamentos/:id` com ID válido. | Levantamento deletado com sucesso, retorna status 200 com mensagem de confirmação e número de fotos removidas. |
| Validação na deleção | Deve retornar erro 400 para ID inválido na deleção. | Fazer `DELETE /levantamentos/invalid-id`. | Retorna erro 400 com mensagem "ID inválido". |
| Adicionar foto | Deve adicionar foto ao levantamento via `POST /levantamentos/fotos/:id`. | Fazer `POST /levantamentos/fotos/:id` com arquivo de imagem válido (JPG/PNG). | Foto adicionada com sucesso, retorna status 200 com URL de acesso e total de fotos. |
| Validação de upload | Deve validar tipo e tamanho do arquivo na adição de foto. | Fazer upload com arquivos inválidos (PDF, arquivo > 5MB, sem arquivo). | Retorna erro 400 com mensagem específica para cada tipo de validação de arquivo. |
| Deletar fotos | Deve deletar todas as fotos do levantamento via `DELETE /levantamentos/fotos/:id`. | Fazer `DELETE /levantamentos/fotos/:id` com ID válido. | Todas as fotos são removidas, retorna status 200 com confirmação e número de fotos removidas. |
| Validação deletar fotos | Deve retornar erro 404 ao tentar deletar fotos de levantamento sem fotos. | Fazer `DELETE /levantamentos/fotos/:id` em levantamento sem fotos. | Retorna erro 404 indicando que não há fotos para remover. |
| Levantamento inexistente | Deve retornar erro 404 para operações em levantamento inexistente. | Fazer `GET`, `PATCH`, `DELETE /levantamentos/507f1f77bcf86cd799439011` com ID inexistente. | Retorna erro 404 com mensagem de levantamento não encontrado. |
| Validação de ObjectId | Deve retornar erro 400 para IDs com formato inválido em todas as operações. | Fazer requisições com IDs malformados (muito curtos, caracteres inválidos). | Retorna erro 400 com mensagem "ID inválido". |
| Límite de paginação | Deve aplicar limite máximo de 100 registros por página. | Fazer `GET /levantamentos?limite=200`. | Resposta limitada a 100 registros no máximo. |
| Populate de relacionamentos | Deve retornar dados populados dos relacionamentos (inventário, usuário, sala). | Fazer `GET /levantamentos` e `GET /levantamentos/:id`. | Cada levantamento contém objetos relacionados com `_id` e `nome` dos relacionamentos. |
| Autenticação nas operações | Deve exigir autenticação para operações protegidas. | Fazer requisições sem token de autenticação válido. | Retorna erro 401 para endpoints que requerem autenticação. |
| Associação automática de usuário | Deve associar automaticamente o usuário logado ao criar levantamento. | Fazer `POST /levantamentos` com usuário autenticado. | Levantamento criado com campo `usuario` preenchido com dados do usuário logado. |
| Erro inesperado | Deve retornar erro 500 para falhas inesperadas nas rotas. | Simular erro interno em qualquer rota do levantamento. | Retorna erro 500 e mensagem padronizada. |
| Query string vazia | Deve processar requisições sem query params usando valores padrão. | Fazer `GET /levantamentos` sem parâmetros. | Retorna primeira página com 10 registros ordenados por data de criação descendente (valores padrão). |
| Múltiplos filtros | Deve aplicar múltiplos filtros simultaneamente. | Fazer `GET /levantamentos?inventario=507f&estado=Em condições de uso&ocioso=false`. | Retorna apenas levantamentos que atendem a TODOS os filtros aplicados. |
| Ordenação | Deve retornar levantamentos ordenados por data de criação de forma descendente. | Fazer `GET /levantamentos` com múltiplos levantamentos. | Levantamentos são retornados ordenados por `createdAt`, mais recentes primeiro. |
| Validação de enum estado | Deve validar valores permitidos para campo estado em criação/atualização. | Fazer requisições com estados inválidos ("Novo", "Usado", etc.). | Retorna erro 400 listando valores permitidos: "Em condições de uso", "Inservível", "Danificado". |
| Upload múltiplo | Deve permitir adicionar múltiplas fotos ao mesmo levantamento. | Fazer múltiplos `POST /levantamentos/fotos/:id` para o mesmo levantamento. | Cada foto é adicionada ao array de imagens, URLs são retornadas para todas as fotos. |
| Integridade referencial | Deve validar existência de inventário, bem e sala antes de criar/atualizar. | Tentar criar/atualizar com IDs de recursos inexistentes. | Retorna erro 404 indicando qual recurso não foi encontrado. |
| Consistência de dados | Deve copiar automaticamente dados do bem (tombo, nome, responsável) ao criar levantamento. | Criar levantamento e verificar se dados do bem foram copiados. | Dados do bem são copiados corretamente para o levantamento na criação. |
| URLs de acesso às imagens | Deve gerar URLs assinadas temporárias para acesso às imagens. | Verificar URLs retornadas após upload de fotos. | URLs são válidas, temporárias e permitem acesso às imagens no storage MinIO. |